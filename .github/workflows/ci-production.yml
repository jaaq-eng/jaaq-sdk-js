name: CI - Production (Manual Only)

on:
  workflow_dispatch:
    inputs:
      confirm:
        description: "Type 'release' to confirm running the production pipeline"
        required: true
        default: "release"

jobs:
  run-base:
    if: ${{ github.ref == 'refs/heads/main' && github.event.inputs.confirm == 'release' }}
    name: Production pipeline
    uses: ./.github/workflows/base.yml
    with:
      environment: production
    environment: production
    secrets: inherit
